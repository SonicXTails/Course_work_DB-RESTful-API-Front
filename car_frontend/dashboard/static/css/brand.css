/* === ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ (light по умолчанию) ========================== */
:root,
:root[data-bs-theme="light"]{
  --brand-name: "HunterAuto";
  --color-primary: #0057B8;
  --color-primary-contrast: #FFFFFF;
  --color-accent: #FFDD00;
  --color-accent-contrast: #111111;
  --color-success: #10B981;
  --color-warning: #F59E0B;
  --color-danger: #EF4444;
  --color-info: #3B82F6;

  /* Светлая тема */
  --bg-base: #FFFFFF;
  --bg-elevated: #F7F9FC;
  --bg-inverted: #0B0F1A;

  --text: #111827;
  --text-muted: #6B7280;
  --text-inverted: #F9FAFB;
  --border: #E5E7EB;

  --font-base: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;

  --fs-xs: 12px; --fs-sm: 14px; --fs-base: 16px; --fs-lg: 18px;
  --fs-xl: 20px; --fs-2xl: 24px; --fs-3xl: 30px; --fs-4xl: 36px;

  --lh-tight: 1.2; --lh-normal: 1.5; --lh-relaxed: 1.7;

  --radius-sm: 8px; --radius-md: 14px; --radius-lg: 20px; --radius-xl: 28px;

  --shadow-sm: 0 2px 8px rgba(0,0,0,.08);
  --shadow-md: 0 10px 25px rgba(0,0,0,.10);
  --shadow-lg: 0 20px 40px rgba(0,0,0,.12);

  --spacing-1: 8px; --spacing-2: 16px; --spacing-3: 24px;

  --container-sm: 640px; --container-md: 1024px; --container-lg: 1280px;

  --focus-ring-color: #3B82F6; --focus-ring-offset: 2px; --focus-ring-width: 3px;

  /* Сопоставление с Bootstrap для светлой темы */
  --bs-body-bg: var(--bg-base);
  --bs-body-color: var(--text);
  --bs-heading-color: var(--text);
  --bs-border-color: var(--border);
  --bs-link-color: var(--color-primary);
  --bs-secondary-color: var(--text-muted);
  --bs-card-bg: var(--bg-elevated);
  --bs-card-color: var(--text);
  --bs-table-bg: #fff;
  --bs-table-color: var(--text);
  --bs-table-striped-bg: rgba(0,0,0,.03);
  --bs-table-striped-color: var(--text);
}

/* === ПЕРЕОПРЕДЕЛЕНИЯ ДЛЯ ТЁМНОЙ ТЕМЫ ===================================== */
:root[data-bs-theme="dark"]{
  --bg-base:#0B0F1A;
  --bg-elevated:#101625;
  --text:#F3F4F6;
  --text-muted:#9CA3AF;
  --border:#1F2937;

  /* Сопоставление с Bootstrap для тёмной темы */
  --bs-body-bg: var(--bg-base);
  --bs-body-color: var(--text);
  --bs-heading-color: var(--text);
  --bs-border-color: var(--border);
  --bs-link-color: var(--color-primary);

  --bs-secondary-color: var(--text-muted);
  --bs-tertiary-color: var(--text-muted);
  --bs-emphasis-color: var(--text);

  --bs-card-bg: #101625;
  --bs-card-color: var(--text);

  --bs-table-bg: #101625;
  --bs-table-color: var(--text);
  --bs-table-striped-bg: rgba(255,255,255,.05);
  --bs-table-striped-color: var(--text);
}

/* === ЖЁСТКО ЗАКРЕПИМ ФОН СТРАНИЦЫ (исправляет разные страницы) =========== */
html, body,
.bg-body,
.bg-body-tertiary,
.bg-light,
.bg-white {
  background-color: var(--bs-body-bg) !important;
  color: var(--bs-body-color) !important;
}

/* === Базовая типографика/разметка ======================================== */
html, body{ height:100%; }
body{ min-height:100vh; display:flex; flex-direction:column; }
main{ flex:1 0 auto; }
footer{ margin-top:auto; }

a{ color:var(--color-primary); text-decoration:none; }
a:hover{ text-decoration:underline; }

.container{ max-width:var(--container-lg); margin:0 auto; padding:var(--spacing-2); }

.card{
  background:var(--bs-card-bg);
  color:var(--bs-card-color);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow-sm);
  padding:var(--spacing-2);
  border:1px solid var(--bs-border-color);
}
.card.inverted{ background:var(--bg-inverted); color:var(--text-inverted); }

.btn{ display:inline-flex; align-items:center; gap:8px; border-radius:var(--radius-md); padding:10px 16px; font-weight:600; border:1px solid transparent; transition:transform .2s, box-shadow .2s; }
.btn:focus{ outline:none; box-shadow:0 0 0 var(--focus-ring-width) var(--focus-ring-color); }
.btn-primary{ background:var(--color-primary); color:var(--color-primary-contrast); }
.btn-primary:hover{ transform:translateY(-1px); box-shadow:var(--shadow-md); }
.btn-accent{ background:var(--color-accent); color:var(--color-accent-contrast); }
.btn-outline{ background:transparent; border-color:var(--bs-border-color); color:var(--bs-body-color); }
.btn-danger{ background:var(--color-danger); color:#fff; }

.input, .form-control, .form-select, .form-control:focus, .form-select:focus{
  background:var(--bg-base);
  border:1px solid var(--bs-border-color);
  color:var(--bs-body-color);
  border-radius:12px;
}
.input:focus, .form-control:focus, .form-select:focus{ outline:none; box-shadow:0 0 0 var(--focus-ring-width) var(--focus-ring-color); }

.table{ width:100%; border-collapse:separate; border-spacing:0; }
.table th, .table td{ text-align:left; padding:12px; border-bottom:1px solid var(--bs-border-color); }
.table thead th{ font-size:14px; color:var(--text-muted); font-weight:600; }

.badge{ display:inline-block; border-radius:999px; padding:4px 10px; font-size:12px; font-weight:600; }
.badge.success{ background:rgba(16,185,129,.15); color:#10B981; }
.badge.warning{ background:rgba(245,158,11,.15); color:#F59E0B; }
.badge.danger{ background:rgba(239,68,68,.15); color:#EF4444; }

/* Респонсив */
@media (max-width:1023px) and (min-width:641px){
  .container{ max-width:var(--container-md); }
  .hide-md{ display:none !important; }
}
@media (max-width:640px){
  .container{ max-width:var(--container-sm); padding:var(--spacing-1); }
  .card{ border-radius:12px; padding:var(--spacing-1); }
  .table{ font-size:12px; overflow-x:auto; display:block; }
  .hide-sm{ display:none !important; }
}

/* Доп. выравнивание цвета muted в темной теме */
[data-bs-theme="dark"] .text-muted,
[data-bs-theme="dark"] .text-secondary,
[data-bs-theme="dark"] .text-body-secondary,
[data-bs-theme="dark"] .text-light-emphasis,
[data-bs-theme="dark"] .form-text,
[data-bs-theme="dark"] .btn .text-light-emphasis {
  color: var(--text-muted) !important;
}

/* === Animations & micro-interactions ===================================== */
:root{
  --anim-fast: 150ms;
  --anim: 250ms;
  --anim-slow: 450ms;
  --ease: cubic-bezier(.2,.7,.2,1);
}

/* Уважение системной настройки «уменьшить анимацию» */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Плавные переходы ключевых поверхностей — красиво при смене темы */
body,
.navbar,
.card,
.offcanvas,
.modal-content,
.dropdown-menu,
.list-group-item,
.form-control,
.form-select,
.btn,
.alert,
.table,
.badge {
  transition:
    background-color var(--anim) var(--ease),
    color            var(--anim) var(--ease),
    border-color     var(--anim) var(--ease),
    box-shadow       var(--anim) var(--ease);
}

/* Карточки: деликатный «въезд» и ховер-подъём */
@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
.card {
  animation: fadeSlideIn .35s var(--ease);
  transition: transform var(--anim-fast) var(--ease), box-shadow var(--anim-fast) var(--ease);
}
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }

/* Кнопки: микро-толчок уже есть, добавим «рипл» по центру */
.btn { position: relative; overflow: hidden; }
.btn::after{
  content:"";
  position:absolute; inset:0;
  border-radius:inherit; pointer-events:none;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,.35), rgba(255,255,255,0) 40%);
  transform: scale(0); opacity:0;
  transition: transform .45s var(--ease), opacity .6s var(--ease);
}
.btn:active::after{ transform: scale(2.4); opacity:.7; }

/* Скелетон-заглушка (на див/картинки с загрузкой) — добавляй класс .shimmer */
@keyframes shimmer {
  from { background-position: 200% 0; }
  to   { background-position: -200% 0; }
}
.shimmer{
  position:relative; overflow:hidden;
  background: linear-gradient(90deg,
    rgba(255,255,255,.08),
    rgba(255,255,255,.18),
    rgba(255,255,255,.08));
  background-size:200% 100%;
  animation: shimmer 1.25s infinite linear;
}
[data-bs-theme="light"] .shimmer{
  background: linear-gradient(90deg,
    rgba(0,0,0,.06),
    rgba(0,0,0,.12),
    rgba(0,0,0,.06));
}

/* Пульс для заметных меток/чипов — используй .pulse или .pulse-once */
@keyframes pulse {
  0%   { transform: scale(1);   box-shadow: 0 0 0 0 rgba(59,130,246,.35); }
  70%  { transform: scale(1.03); box-shadow: 0 0 0 10px rgba(59,130,246,0); }
  100% { transform: scale(1);   box-shadow: 0 0 0 0 rgba(59,130,246,0); }
}
.pulse{ animation: pulse 1.2s var(--ease) infinite; }
.pulse-once{ animation: pulse .9s var(--ease) 1; }
