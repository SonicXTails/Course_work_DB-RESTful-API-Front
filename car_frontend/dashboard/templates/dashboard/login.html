{% extends "dashboard/base.html" %}
{% load static %}

{% block title %}Вход / Регистрация{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dashboard/css/login_adaptive.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h2 id="form-title">Вход в систему</h2>

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    <div class="form-wrapper">
        <!-- Форма логина -->
        <div id="login-form" class="form-panel active">
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="login">
                <input type="text" name="username" placeholder="Имя пользователя" required>
                <input type="password" name="password" placeholder="Пароль" required>
                <button type="submit" class="login">Войти</button>
            </form>
            <p class="toggle-form">У меня нет аккаунта? <a href="#" id="show-register">Зарегистрироваться</a></p>
        </div>

        <!-- Форма регистрации -->
        <div id="register-form" class="form-panel">
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="register">
                <input type="text" name="username" placeholder="Имя пользователя" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Пароль" required>
                <input type="text" name="first_name" placeholder="Имя">
                <input type="text" name="last_name" placeholder="Фамилия">
                <button type="submit" class="register">Зарегистрироваться</button>
            </form>
            <p class="toggle-form">Уже есть аккаунт? <a href="#" id="show-login">Войти</a></p>
        </div>
    </div>
</div>

<script>
const loginForm = document.getElementById('login-form');
const registerForm = document.getElementById('register-form');
const formTitle = document.getElementById('form-title');

document.getElementById('show-register').addEventListener('click', function(e) {
    e.preventDefault();
    loginForm.classList.remove('active');
    registerForm.classList.add('active');
    formTitle.textContent = 'Регистрация';
});

document.getElementById('show-login').addEventListener('click', function(e) {
    e.preventDefault();
    registerForm.classList.remove('active');
    loginForm.classList.add('active');
    formTitle.textContent = 'Вход в систему';
});
</script>
{% endblock %}
